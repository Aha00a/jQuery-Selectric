/*! Selectric ÏŸ v1.9.1 (2015-04-06) - git.io/tjl9sQ - Copyright (c) 2015 Leonardo Santos - Dual licensed: MIT/GPL */
!function(e){"use strict";var t="selectric",s=".sl",o={onChange:function(t){e(t).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!0,openOnHover:!1,hoverIntentTimeout:500,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,allowWrap:!0,customClass:{prefix:t,postfixes:"Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll Group GroupLabel",camelCase:!1,overwrite:!0},optionsItemBuilder:"{text}"},i={add:function(e,t,s){this[e]||(this[e]={}),this[e][t]=s},remove:function(e,t){delete this[e][t]}},n={replaceDiacritics:function(e){for(var t="40-46 50-53 54-57 62-70 71-74 61 47 77".replace(/\d+/g,"\\3$&").split(" "),s=t.length;s--;)e=e.toLowerCase().replace(RegExp("["+t[s]+"]","g"),"aeiouncy".charAt(s));return e},format:function(e){var t=arguments;return(""+e).replace(/{(\d+|(\w+))}/g,function(e,s,o){return o&&t[1]?t[1][o]:t[s]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(s,o){var a=o.element,l=o.options["on"+s];e.isFunction(l)&&l.call(a,a,o),i[s]&&e.each(i[s],function(){this.call(a,a,o)}),e(a).trigger(t+"-"+n.toDash(s),o)}},a=e(document),l=e(window),r=function(i,r){function c(t){if(A.options=e.extend(!0,{},o,A.options,t),A.classes={},A.element=i,n.triggerCallback("BeforeInit",A),A.options.disableOnMobile&&R)return void(A.disableOnMobile=!0);w(!0);var s=A.options.customClass,a=s.postfixes.split(" "),l=$.width();e.each(a,function(e,t){var o=s.prefix+a[e];A.classes[t.toLowerCase()]=s.camelCase?o:n.toDash(o)}),C=e("<input/>",{"class":A.classes.input,readonly:R}),x=e("<div/>",{"class":A.classes.items,tabindex:-1}),k=e("<div/>",{"class":A.classes.scroll}),T=e("<div/>",{"class":s.prefix,html:A.options.arrowButtonMarkup}),D=e('<p class="label"/>'),I=$.wrap("<div>").parent().append(T.prepend(D),x,C),E={open:f,close:m,destroy:w,refresh:d,init:c},$.on(E).wrap('<div class="'+A.classes.hideselect+'">'),e.extend(A,E),A.options.inheritOriginalWidth&&l>0&&I.width(l),p()}function p(){A.items=[];var t=$.children(),o="<ul>",i=t.filter(":selected").index(),a=0;S=O=~i?i:0,(M=t.length)&&(t.each(function(){function t(){var t=e(this),s=t.html(),i=t.prop("disabled"),l=A.options.optionsItemBuilder;A.items[a]={element:t,value:t.val(),text:s,slug:n.replaceDiacritics(s),disabled:i},o+=n.format('<li data-index="{1}" class="{2}">{3}</li>',a,e.trim([a==S?"selected":"",a==M-1?"last":"",i?"disabled":""].join(" ")),e.isFunction(l)?l(A.items[a],t,a):n.format(l,A.items[a])),a++}var s=e(this);if(s.is("optgroup")){var i=s.prop("disabled"),l=s.children();o+=n.format('<ul class="{1}"><li class="{2}">{3}</li>',e.trim([A.classes.group,i?"disabled":"",s.prop("class")].join(" ")),A.classes.grouplabel,s.prop("label")),i&&l.prop("disabled",!0),l.each(t),o+="</ul>"}else t.call(s)}),x.append(k.html(o+"</ul>")),D.html(A.items[S].text)),T.add($).add(I).add(C).off(s),I.prop("class",[A.classes.wrapper,A.options.customClass.overwrite?$.prop("class").replace(/\S+/g,A.options.customClass.prefix+"-$&"):$.prop("class"),A.options.responsive?A.classes.responsive:""].join(" ")),$.prop("disabled")?(I.addClass(A.classes.disabled),C.prop("disabled",!0)):(L=!0,I.removeClass(A.classes.disabled).on("mouseenter"+s+" mouseleave"+s,function(t){e(this).toggleClass(A.classes.hover),A.options.openOnHover&&(clearTimeout(A.closeTimer),"mouseleave"==t.type?A.closeTimer=setTimeout(m,A.options.hoverIntentTimeout):f())}),T.on("click"+s,function(e){j?m():f(e)}),C.prop({tabindex:Y,disabled:!1}).on("keypress"+s,u).on("keydown"+s,function(e){u(e),clearTimeout(A.resetStr),A.resetStr=setTimeout(function(){C.val("")},A.options.keySearchTimeout);var t=e.keyCode||e.which;if(t>36&&41>t){if(!A.options.allowWrap&&(39>t&&0==O||t>38&&O+1==A.items.length))return;g(n[(39>t?"previous":"next")+"EnabledItem"](A.items,O))}}).on("focusin"+s,function(e){C.one("blur",function(){C.blur()}),j||f(e)}).on("oninput"in C[0]?"input":"keyup",function(){C.val().length&&e.each(A.items,function(e,t){return RegExp("^"+C.val(),"i").test(t.slug)&&!t.disabled?(g(e),!1):void 0})}),$.prop("tabindex",!1),y=e("li",x.removeAttr("style")).on({mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(){return g(e(this).data("index"),!0),!1}}).filter("[data-index]")),n.triggerCallback("Init",A)}function d(){n.triggerCallback("Refresh",A),p()}function u(e){var t=e.keyCode||e.which;13==t&&e.preventDefault(),/^(9|13|27)$/.test(t)&&(e.stopPropagation(),g(O,!0))}function h(){var e=x.closest(":visible").children(":hidden").addClass(A.classes.tempshow),t=A.options.maxHeight,s=x.outerWidth(),o=T.outerWidth()-(s-x.width());!A.options.expandToItemText||o>s?B=o:(x.css("overflow","scroll"),I.width(9e4),B=x.width(),x.css("overflow",""),I.width("")),x.width(B).height()>t&&x.height(t),e.removeClass(A.classes.tempshow)}function f(o){n.triggerCallback("BeforeOpen",A),o&&(o.preventDefault(),o.stopPropagation()),L&&(h(),e("."+A.classes.hideselect,"."+A.classes.open).children()[t]("close"),j=!0,H=x.outerHeight(),W=x.height(),I.addClass(A.classes.open),C.val("").is(":focus")||C.focus(),a.on("click"+s,m).on("scroll"+s,v),v(),A.options.preventWindowScroll&&a.on("mousewheel"+s+" DOMMouseScroll"+s,"."+A.classes.scroll,function(t){var s=t.originalEvent,o=e(this).scrollTop(),i=0;"detail"in s&&(i=-1*s.detail),"wheelDelta"in s&&(i=s.wheelDelta),"wheelDeltaY"in s&&(i=s.wheelDeltaY),"deltaY"in s&&(i=-1*s.deltaY),(o==this.scrollHeight-W&&0>i||0==o&&i>0)&&t.preventDefault()}),b(O),n.triggerCallback("Open",A))}function v(){I.toggleClass(A.classes.above,I.offset().top+I.outerHeight()+H>l.scrollTop()+l.height())}function m(){if(n.triggerCallback("BeforeClose",A),S!=O){n.triggerCallback("BeforeChange",A);var e=A.items[O].text;$.prop("selectedIndex",S=O).data("value",e),D.html(e),n.triggerCallback("Change",A)}a.off(s),I.removeClass(A.classes.open),j=!1,n.triggerCallback("Close",A)}function g(e,t){void 0!=e&&(A.items[e].disabled||(y.removeClass("selected").eq(O=e).addClass("selected"),b(e),t&&m()))}function b(e){var t=y.eq(e).outerHeight(),s=y[e].offsetTop,o=k.scrollTop(),i=s+2*t;k.scrollTop(i>o+H?i-H:o>s-t?s-t:o)}function w(e){L&&(x.add(T).add(C).remove(),!e&&$.removeData(t).removeData("value"),$.prop("tabindex",Y).off(s).off(E).unwrap().unwrap(),L=!1)}var C,x,k,T,D,I,y,O,S,H,W,B,M,E,A=this,$=e(i),j=!1,L=!1,R=/android|ip(hone|od|ad)/i.test(navigator.userAgent),Y=$.prop("tabindex");c(r)};e.fn[t]=function(s){return this.each(function(){var o=e.data(this,t);o&&!o.disableOnMobile?""+s===s&&o[s]?o[s]():o.init(s):e.data(this,t,new r(this,s))})},e.fn[t].hooks=i}(jQuery);