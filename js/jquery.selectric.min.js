/*! SelEctric ÏŸ v1.4.2 | Copyright (c) 2012 Leonardo Santos | Dual licensed under the MIT and GPL licenses */
(function(g,G){function m(d,c){this.element=d;this.options=g.extend({},v,c);/android|ip(hone|od|ad)/i.test(navigator.userAgent)||this.init(this.options)}var c="selectric",v={onOpen:function(){},onClose:function(){},maxHeight:300,keySearchTimeout:500,highlight:!0,arrowButtonMarkup:'<span class="button">&#9660;</span>',disableOnMobile:!0,margin:5,bindSufix:".sl",border:1};m.prototype.init=function(d){function s(){i.parent().unbind("click");b.unbind(z).unbind("focusin");l.addClass(A.className);b.prop("disabled")?l.addClass(c+"Disabled"):(l.removeClass(c+"Disabled"),b.bind(z,v),i.parent().bind("click"+j,H),b.bind("focusin"+j,function(a){!n&&w(a)}),h=k.find("ul"),t=h.find("li").click(function(a){a.stopPropagation();o(g(this).index(),!0)}));b.parent().append(k);b.wrap('<div class="'+c+'HideSelect" />')}function m(){h.empty();var a=b.find("option"),p="",d=a.filter(":selected").index();a.length&&(a.each(function(c){for(var b=g(this),e="",h=f,i=b.val(),k=b.text(),b=b.text(),j=B.length;j--;)b=b.toLowerCase().replace(B[j],I[j]);h[c]={value:i,text:k,slug:b};c===d&&(f.selected=c,e="selected");a.length-1===c&&(e+=" last");p+='<li class="'+e+'" data-value="'+f[c].value+'">'+f[c].text+"</li>"}),h.append(p),i.text(f[f.selected].text))}function v(a){a.preventDefault();var b=f.selected,c=f.length,d=a.keyCode;/^3(7|8)$/.test(d)&&o(0===b?c-1:b-1);/^(39|40)$/.test(d)&&o(b<c-1?b+1:0);/^(9|13|27)$/.test(d)&&(a.stopPropagation(),o(b,!0))}function H(a){n?u(a):w(a)}function w(a){a.preventDefault();a.stopPropagation();g("."+c+"Open select")[c]("close");C();n=!0;var p=q.scrollTop();"click"===a.type&&b.focus();q.scrollTop(p);x.bind("click"+j,u);l.addClass(c+"Open");D(h.find(".selected").index());d.onOpen.call(this)}function C(){var a=x.height();e.show().css("top","");e.top+e.height()>a||l.offset().top+h.parent().height()>q.scrollTop()+q.height()?(e.css("top",-h.parent().height()),0>e.offset().top-e.height()&&k.offset().top<d.maxHeight&&e.height(k.offset().top-d.margin).css("top",-h.parent().height())):y()}function u(){var a=f[f.selected].text;e.hide();b.blur();a!=i.text()&&b.change();i.text(a);l.removeClass(c+"Open");n=!1;E&&i.html(i.text());x.unbind(j);d.onClose.call(b)}function o(a,c){t.removeClass("selected").eq(a).addClass("selected");b.val(f[a].value).find("option").eq(a).prop("selected",!0);D(a);f.selected=a;c&&u()}function D(a){var b=h.parent(),c=t[a].offsetTop,a=t.eq(a).outerHeight(),d=b.scrollTop(),e=b.height(),f=c+2*a;f>d+e?b.scrollTop(f-e):c-a<d&&b.scrollTop(c-a)}function y(){e.height()>d.maxHeight&&e.height(d.maxHeight);e.width(k.outerWidth()-2*d.border)}var k=g('<div class="'+c+'"><p class="label"/>'+d.arrowButtonMarkup+'</div><div class="'+c+'Items"><ul/></div>'),A=this.element,b=g(A),f=[],n=!1,i=k.find(".label"),h=k.find("ul"),t,e=h.parent(),j=("."+d.bindSufix).replace(/^\.+/g,"."),x=g(document),q=g(G),l=b.wrap('<div class="'+c+'Wrapper"/>').parent().hover(function(){g(this).toggleClass("hover")}),z=g.browser.mozilla?"keypress"+j:"keydown"+j,I="aeiouncy".split(""),B=[/[\340-\346]/g,/[\350-\353]/g,/[\354-\357]/g,/[\362-\370]/g,/[\371-\374]/g,/[\361]/g,/[\347]/g,/[\377]/g],r="",F,E=d.highlight;b.data(c,this);m();s();b.bind("keydown",function(a){a=a.keyCode||a.which;clearTimeout(F);if(/^(3(7|8|9)|40)$/.test(a))r="";else{r+=String.fromCharCode(a);for(var a=RegExp("^("+r+")","i"),b=0,c=f.length;b<c;){if(a.test(f[b].slug)||a.test(f[b].text)){o(b);E&&i.html(i.text().replace(a,"<span>$1</span>"));break}b++}F=setTimeout(function(){r=""},d.keySearchTimeout)}});q.scroll(function(){n&&C()});y();b.bind("refresh",function(){m();y();s()}).bind("destroy",function(){e.remove();k.remove();b.unwrap("."+c+"Wrapper").removeData(c).unbind(j+" refresh destroy open close")}).bind("open",w).bind("close",u)};g.fn[c]=function(d,s){return this.each(function(){g.data(this,c)?"string"===typeof d&&g(this).trigger(d):new m(this,d?d:s)})}})(jQuery,window);