/*! SelEctric ÏŸ v1.4.8 | Copyright (c) 2013 Leonardo Santos; Dual licensed: MIT/GPL */
(function(g,L){function l(e,b){this.element=e;this.options=g.extend(h,b);h.disableOnMobile&&!/android|ip(hone|od|ad)/i.test(navigator.userAgent)&&this.init(h)}var b="selectric",h={onOpen:function(){},onClose:function(){},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#9662;</b>',disableOnMobile:!0,margin:5,border:1};l.prototype.init=function(e){function E(){u.empty();var a=c.find("option"),d="",e=a.length,b=a.filter(":"+q).index();j=0>b?0:b;e&&(a.each(function(a){var b=g(this),f=a==j?q:"",c=b.text(),b=b.val(),m=p,n=a,k=c,l,h="40-46 50-53 54-57 62-70 71-74 61 47 77".replace(/\d+/g,"\\3$&").split(" ");for(l in h)k=k.toLowerCase().replace(RegExp("["+h[l]+"]","g"),"aeiouncy".charAt(l));m[n]={value:b,text:c,slug:k};++a==e&&(f+=" last");v=a;d+='<li class="'+f+'" data-value="'+b+'">'+c+"</li>"}),u.append(d),z.text(p[j].text));m.unbind(n);c.unbind(F+" focusin");k[0].className=G+" "+c.prop("class")+" "+H;c.prop("disabled")||(k.removeClass(H).hover(function(){g(this).toggleClass("hover")}),m.bind(I,r?w:A),c.bind(F,h).bind("focusin"+n,r||A),u=f.removeAttr("style").find("ul"),x=u.find("li").click(function(){s(g(this).index(),!0);return!1}))}function h(a){a.preventDefault();var d=a.keyCode;/^3[78]$/.test(d)&&s((0<j?j:v)-1);/^39|40$/.test(d)&&s((j+1)%v);/^9|13|27$/.test(d)&&(a.stopPropagation(),s(j,!0))}function A(a){a.preventDefault();a.stopPropagation();g("."+B+" select")[b]("close");r=!0;l();var d=t.scrollTop();"click"==a.type&&c.focus();t.scrollTop(d);C.bind(I,w);k.addClass(B);J(j);e.onOpen.call(this)}function l(){if(r){var a=f.show().css("top","").offset().top,d=f.height(),b=m.offset().top;if(a+d>C.height()||k.offset().top+d>t.scrollTop()+t.height())f.css("top",-d),0>a-d&&b<e.maxHeight&&f.height(b-e.margin);D()}}function w(){var a=p[j].text;f.hide();c.blur();a!=z.text()&&c.change();z.text(a);k.removeClass(B);r=!1;C.unbind(n);e.onClose.call(c)}function s(a,d){c.val(p[j=a].value).find("option").eq(a).prop(q,!0);x.removeClass(q).eq(a).addClass(q);J(a);d&&w()}function J(a){var d=x.eq(a).outerHeight();a=x[a].offsetTop;var b=f.scrollTop(),c=f.height(),e=a+2*d;e>b+c?f.scrollTop(e-c):a-d<b&&f.scrollTop(a-d)}function D(){var a=f.closest(":visible").children(),d=b+"TempShow",c=e.maxHeight;a.addClass(d);f.height()>c&&f.height(c);f.width(m.outerWidth()-2*e.border);a.removeClass(d)}var m=g('<div class="'+b+'"><p class="label"/>'+e.arrowButtonMarkup+"</div>"),c=g(this.element),k=c.data(b,this).wrap("<div/>").parent().append(m),p=[],r=!1,z=m.find(".label"),f=g('<div class="'+b+'Items"><ul/></div>').appendTo(k),u=f.find("ul"),x,n=".sl",C=g(document),t=g(L),F="keydown"+n,I="click"+n,y="",K,B=b+"Open",G=b+"Wrapper",H=b+"Disabled",q="selected",j=0,v;c.wrap('<div class="'+b+'HideSelect"/>');E();c.bind("keydown",function(a){var b=a.keyCode||a.which;a=0;clearTimeout(K);if(37>b||40<b){for(b=RegExp("^"+(y+=String.fromCharCode(b)),"i");++a<v;)if(b.test(p[a].slug)||b.test(p[a].text)){s(a);break}K=setTimeout(function(){y=""},e.keySearchTimeout)}else y=""});t.scroll(l);D();c.bind({refresh:function(){E();D()},destroy:function(){f.remove();m.remove();c.removeData(b).unbind(n+" refresh destroy open close").unwrap("."+b+"HideSelect").unwrap("."+G)},open:A,close:w})};g.fn[b]=function(e,h){return this.each(function(){g.data(this,b)?""+e===e&&g(this).trigger(e):new l(this,e||h)})}})(jQuery,window);