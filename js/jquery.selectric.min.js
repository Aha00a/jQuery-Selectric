/*! SelEctric ÏŸ v1.4.9 | Copyright (c) 2013 Leonardo Santos; Dual licensed: MIT/GPL */
(function(f,L){function m(c,d){this.element=c;this.options=f.extend(n,d);n.disableOnMobile&&!/android|ip(hone|od|ad)/i.test(navigator.userAgent)&&this.init(n)}var d="selectric",n={onOpen:function(){},onClose:function(){},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#9662;</b>',disableOnMobile:!0,margin:5,border:1};m.prototype.init=function(c){function E(){u.empty();var a=e.find("option"),g="",F=a.length,c=a.filter(":"+q).index();h=0>c?0:c;F&&(a.each(function(a){var c=f(this),b=a==h?q:"",d=c.text(),c=c.val(),e=p,l=a,j=d,k,m="40-46 50-53 54-57 62-70 71-74 61 47 77".replace(/\d+/g,"\\3$&").split(" ");for(k in m)j=j.toLowerCase().replace(RegExp("["+m[k]+"]","g"),"aeiouncy".charAt(k));e[l]={value:c,text:d,slug:j};++a==F&&(b+=" last");v=a;g+='<li class="'+b+'" data-value="'+c+'">'+d+"</li>"}),u.append(g),z.text(p[h].text));l.unbind(j);e.unbind(G+" focusin");k[0].className=M+" "+e.prop("class")+" "+H;e.prop("disabled")||(k.removeClass(H).hover(function(){f(this).toggleClass("hover")}),l.bind(I,function(a){r?w(a):A(a)}),e.bind(G,n).bind("focusin"+j,function(a){r||A(a)}),u=b.removeAttr("style").find("ul"),x=u.find("li").click(function(){s(f(this).index(),!0);return!1}))}function n(a){a.preventDefault();var g=a.keyCode||a.which,b=0;/^9|13|27$/.test(g)&&(a.stopPropagation(),s(h,!0));clearTimeout(J);if(37>g||40<g){for(a=RegExp("^"+(y+=String.fromCharCode(g)),"i");++b<v;)if(a.test(p[b].slug)||a.test(p[b].text)){s(b);break}J=setTimeout(function(){y=""},c.keySearchTimeout)}else y="",/^39|40$/.test(g)?s((h+1)%v):s((0<h?h:v)-1)}function A(a){a.preventDefault();a.stopPropagation();f("."+B+" select")[d]("close");r=!0;m();var b=t.scrollTop();"click"==a.type&&e.focus();t.scrollTop(b);C.bind(I,w);k.addClass(B);K(h);c.onOpen.call(this)}function m(){if(r){var a=b.show().css("top","").offset().top,g=b.height(),d=l.offset().top;if(a+g>C.height()||k.offset().top+g>t.scrollTop()+t.height())b.css("top",-g),0>a-g&&d<c.maxHeight&&b.height(d-c.margin);D()}}function w(){var a=p[h].text;b.hide();e.blur();a!=z.text()&&e.change();z.text(a);k.removeClass(B);r=!1;C.unbind(j);c.onClose.call(e)}function s(a,b){e.prop("value",p[h=a].value).find("option").eq(a).prop(q,!0);x.removeClass(q).eq(a).addClass(q);K(a);b&&w()}function K(a){var c=x.eq(a).outerHeight();a=x[a].offsetTop;var d=b.scrollTop(),e=b.height(),f=a+2*c;f>d+e?b.scrollTop(f-e):a-c<d&&b.scrollTop(a-c)}function D(){var a=b.closest(":visible").children(),e=d+"TempShow",f=c.maxHeight;a.addClass(e);b.height()>f&&b.height(f);b.width(l.outerWidth()-2*c.border);a.removeClass(e)}var l=f('<div class="'+d+'"><p class="label"/>'+c.arrowButtonMarkup+"</div>"),e=f(this.element),k=e.data(d,this).wrap("<div/>").parent().append(l),p=[],r=!1,z=l.find(".label"),b=f('<div class="'+d+'Items"><ul/></div>').appendTo(k),u=b.find("ul"),x,j=".sl",C=f(document),t=f(L),G="keydown"+j,I="click"+j,y="",J,B=d+"Open",M=d+"Wrapper",H=d+"Disabled",q="selected",h=0,v;e.wrap('<div class="'+d+'HideSelect"/>');E();t.scroll(m);D();e.bind({refresh:function(){E();D()},destroy:function(){b.remove();l.remove();e.removeData(d).unbind(j+" refresh destroy open close").unwrap().unwrap()},open:A,close:w})};f.fn[d]=function(c,n){return this.each(function(){f.data(this,d)?""+c===c&&f(this).trigger(c):new m(this,c||n)})}})(jQuery,window);